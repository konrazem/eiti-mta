(this["webpackJsonpeiti-app"]=this["webpackJsonpeiti-app"]||[]).push([[0],{258:function(e,t,a){e.exports=a(285)},263:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),l=a.n(i),o=(a(263),a(30)),c=a(23),s=a(44),u=a(45),m=a(49),d=a(20),p=a(4),f=a(239),h=a(222),E=a(151),y=a(311),b=a(223),v=a(244),g=a.n(v),w=a(241),k=a.n(w),j=a(242),x=a.n(j),S=a(124),O=a.n(S),C=a(240),P=a.n(C),N=a(243),M=a.n(N),L=Object(p.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(f.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),A=Object(p.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}},link:{}}}}))(h.a),D=function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),i=a[0],l=a[1];var o=[{text:"Home",icon:r.a.createElement(O.a,null),link:"/"},{text:"Products",icon:r.a.createElement(P.a,null),link:"/products/skip/0/limit/200"},{text:"Add product",icon:r.a.createElement(k.a,null),link:"/product"},{text:"Profile",icon:r.a.createElement(x.a,null),link:"/profile"},{text:"Logout",icon:r.a.createElement(M.a,null),link:"/logout"}];return r.a.createElement("div",null,r.a.createElement(E.a,{color:"inherit","aria-haspopup":"true","aria-controls":"menu-appbar",onClick:function(e){l(e.currentTarget)}},r.a.createElement(g.a,null)),r.a.createElement(L,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){l(null)}},o.map((function(e,t){return r.a.createElement(A,{onClick:function(){return window.location=e.link},key:"menu-item-"+t},r.a.createElement(y.a,null,e.icon),r.a.createElement(b.a,{primary:e.text}))}))))},T=a(112),I=a(312),U=a(224),G=a(65),R=Object(T.a)((function(e){return{root:{flexGrow:1},menuButton:{marginLeft:e.spacing(2)},title:{flexGrow:1,marginLeft:e.spacing(2)},priceListTitle:{flexGrow:1,paddingLeft:e.spacing(2),fontStyle:"italic",backgroundColor:e.palette.primary.light}}})),W=function(e){var t=R();return r.a.createElement("div",{className:t.root},r.a.createElement(I.a,{position:"sticky"},r.a.createElement(U.a,null,r.a.createElement(G.a,{variant:"subtitle1",className:t.title},"EITI App - Production"),r.a.createElement(D,null))))},z=a(313),B=a(149),H=a(123),J=Object(T.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"}}})),K=function(e){var t=J();return r.a.createElement("div",null,r.a.createElement(H.a,{className:t.root},r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(z.a,{disableShrink:!0})),r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement("p",null,e.text))))},V=a(158),_=a.n(V),F=a(246),X=a.n(F),Y=a(317),$=a(245),q=a.n($);function Q(e){var t=e.text;return r.a.createElement("div",{style:{paddingTop:50}},r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(Y.a,null,r.a.createElement(q.a,null))),r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement("p",{style:{maxWidth:400}},t)))}var Z=a(289),ee=a(290),te=a(314),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={profile:{id:"konradgrzyb@gmail.com",name:{givenName:"Konrad",familyName:"Grzyb"}},loaded:!1,error:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/user").then((function(e){return e.json()})).then((function(t){return e.setState({profile:t,loaded:!0})})).catch((function(t){return console.error(t),e.setState({error:t+""})}))}},{key:"render",value:function(){var e=this.state,t=e.profile,a=e.loaded;if(e.error)return r.a.createElement(Q,{text:"Server error while fetching user data"});if(!a)return r.a.createElement(K,{text:"Loading user data..."});var n="",i="",l="";return t.name&&(n=t.id,i=t.name.givenName,l=t.name.familyName),r.a.createElement("div",{className:"eiti-profile-wrapper"},r.a.createElement(Z.a,{subheader:"User Profile"},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Y.a,null,r.a.createElement(X.a,null))),r.a.createElement(b.a,{primary:"Email",secondary:n})),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Y.a,null,r.a.createElement(_.a,null))),r.a.createElement(b.a,{primary:"Name",secondary:i})),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Y.a,null,r.a.createElement(_.a,null))),r.a.createElement(b.a,{primary:"Surname",secondary:l}))))}}]),t}(r.a.Component);function ne(){return r.a.createElement("div",null,r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(Y.a,null,r.a.createElement(O.a,null))),r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(G.a,{variant:"h5",style:{textAlign:"center"}},"Welcome!")),r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(G.a,{variant:"h5",style:{textAlign:"center"}},"To the product manager.")),r.a.createElement(B.a,{component:"span",m:1,display:"flex",justifyContent:"center"},r.a.createElement(G.a,{variant:"subtitle1",style:{textAlign:"center"}},"Please choose menu option.")))}var re=a(126),ie=a(42);function le(e){var t=[];if(e instanceof Object)for(var a in e){var n="text",r=e[a];if("dateAdded"===a||"dateUpdated"===a){var i=new Date(r);"Invalid Date"!==i.toString()&&(r=i.toISOString().split("T")[0]),n="date"}t.push({defaultValue:r,label:a.toString(),id:a.toString(),type:n})}return t}var oe=a(315),ce=a(225),se=a(316),ue=a(154);function me(e){var t=e.product,a=e.editMode,n=e.handleSave,i=e.handleDelete,l=e.newProduct,o=le(t),c={root:{flexGrow:1},title:{flexGrow:1},bar:{boxShadow:"none"}};return r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,xs:12,md:8},r.a.createElement("form",{id:"product-form",onSubmit:function(e){e.preventDefault();for(var a=e.target.elements,r=Object(re.a)({},t),i=0,l=Object.keys(r);i<l.length;i++){var o=l[i];a.hasOwnProperty(o)&&(r[o]=a[o].value||"")}n(r)}},r.a.createElement(Z.a,{dense:!0},o.map((function(e,t){return r.a.createElement(ee.a,{style:c,key:"prod-"+t},r.a.createElement(ce.a,{id:e.id,label:e.label,name:e.label,style:{margin:8},defaultValue:e.defaultValue,fullWidth:!0,disabled:!a,margin:"normal",type:e.type,InputLabelProps:{shrink:!0}}))}))),r.a.createElement(se.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(ue.a,{type:"submit",disabled:!a},"save"),r.a.createElement(ue.a,{disabled:l,onClick:i},"delete")))))}var de={name:"",price:"",currency:"",brand:"",condition:"",isSale:"",merchant:"",shipping:"",ean:"",asins:"",upc:"",weight:"",categories:"",dateAdded:"",dateUpdated:"",keys:"",manufacturer:"",manufacturerNumber:"",primaryCategories:"",sourceURLs:""},pe="http://localhost:5000/product",fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={data:null,error:!1,editMode:!1,newProduct:!1},a.handleSave=a.handleSave.bind(Object(ie.a)(a)),a.handleDelete=a.handleDelete.bind(Object(ie.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t?fetch(pe+"/"+t).then((function(t){if(t.ok)return t.json();e.setState({error:!0})})).then((function(t){e.setState({data:t})})).catch((function(t){return e.setState({error:t})})):this.setState({data:[Object(re.a)({},de)],newProduct:!0,editMode:!0})}},{key:"changeMode",value:function(){this.setState({editMode:!this.state.editMode})}},{key:"handleDelete",value:function(){var e=this,t=this.props.match.params.id;fetch(pe+"/"+t,{method:"DELETE"}).then((function(a){a.ok?window.location="/product/"+t:e.setState({error:!0})})).catch((function(t){return e.setState({error:t})}))}},{key:"handleSave",value:function(e){var t=this,a=this.state.newProduct?pe:pe+"/"+e._id;fetch(a,{method:this.state.newProduct?"POST":"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?window.location="/products/skip/0/limit/200":t.setState({error:!0})})).catch((function(e){return t.setState({error:e})}))}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.error,n=e.editMode,i=e.newProduct;if(a)return r.a.createElement(Q,{text:"Error while fetching the product."});if(!t)return r.a.createElement(K,{text:"Loading products' data...",changePrice:this.changePrice});if(!t.length)return r.a.createElement(Q,{text:"Product was not found or product was deleted."});var l="Product";return n&&(l="Edit product"),i&&(l="New product"),r.a.createElement("div",{style:{flexGrow:1,padding:10}},r.a.createElement(U.a,null,r.a.createElement(G.a,{variant:"h6",style:{flexGrow:1}},l),r.a.createElement(ue.a,{onClick:this.changeMode.bind(this),variant:"contained",color:"primary"},n?"Cancel":"Edit")),r.a.createElement(me,{editMode:n,product:t[0],handleSave:this.handleSave,handleDelete:this.handleDelete,newProduct:i}))}}]),t}(r.a.Component),he=Object(T.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto"}}}));function Ee(e){var t=e.skip,a=e.limit,n=e.count,i=he(),l=r.a.useState(t),o=Object(d.a)(l,2),c=o[0],s=o[1],u=r.a.useState(a),m=Object(d.a)(u,2),p=m[0],f=m[1];return r.a.createElement("div",{className:i.root},r.a.createElement(H.a,{className:i.paper},r.a.createElement(oe.a,{container:!0,spacing:4},r.a.createElement(oe.a,{item:!0},r.a.createElement(G.a,{variant:"h6"},"There are ",n," products in database. You can portion this data with skip and limit values below or change URL.")),r.a.createElement(oe.a,{container:!0,item:!0,spacing:2,justify:"flex-end"},r.a.createElement(oe.a,{item:!0},r.a.createElement(ce.a,{id:"textfiled-skip",label:t.toString(),placeholder:"How many to skip",onChange:function(e){return s(e.target.value)},type:"number",variant:"outlined"})),r.a.createElement(oe.a,{item:!0},r.a.createElement(ce.a,{id:"textfield-limit",label:a.toString(),placeholder:"How many to load",onChange:function(e){return f(e.target.value)},type:"number",variant:"outlined"}))),r.a.createElement(oe.a,{item:!0,container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(oe.a,{item:!0},r.a.createElement(ue.a,{color:"primary",variant:"contained",onClick:function(){window.location="/products/skip/".concat(c,"/limit/").concat(p)}},"Submit"))))))}var ye=a(248),be=a.n(ye),ve=[{name:"_id",label:"ID",options:{filter:!1,sort:!0,display:!1}},{name:"name",label:"Name",options:{filter:!1,sort:!0,display:!0}},{name:"price",label:"Price",options:{filter:!1,sort:!0,display:!0}},{name:"currency",label:"Currency",options:{filter:!1,sort:!0,display:!0}},{name:"brand",label:"Brand",options:{filter:!1,sort:!0,display:!0}},{name:"condition",label:"Condition",options:{filter:!1,sort:!0,display:!1}},{name:"isSale",label:"For Sale",options:{filter:!1,sort:!0,display:!1}},{name:"merchant",label:"Merchant",options:{filter:!1,sort:!0,display:!0}},{name:"shipping",label:"Shipping",options:{filter:!1,sort:!0,display:!1}},{name:"ean",label:"EAN",options:{filter:!1,sort:!0,display:!0}},{name:"asins",label:"Asins",options:{filter:!1,sort:!0,display:!1}},{name:"weight",label:"Weight",options:{filter:!1,sort:!0,display:!1}},{name:"categories",label:"Categories",options:{filter:!1,sort:!0,display:!1}},{name:"dateAdded",label:"Added Date",options:{filter:!1,sort:!0,display:!1}},{name:"dateUpdated",label:"Update Date",options:{filter:!1,sort:!0,display:!1}},{name:"manufacturer",label:"Manufacturer",options:{filter:!1,sort:!0,display:!1}},{name:"manufacturerNumber",label:"Manufacturer Number",options:{filter:!1,sort:!0,display:!1}},{name:"primaryCategories",label:"Primary Categories",options:{filter:!1,sort:!0,display:!1}},{name:"upc",label:"UPC",options:{filter:!1,sort:!0,display:"false",viewColumns:!1}},{name:"keys",label:"Keys",options:{filter:!1,sort:!0,display:"false",viewColumns:!1}},{name:"sourceURLs",label:"URL",options:{filter:!1,sort:!0,display:"false",viewColumns:!1}}],ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={data:!1,error:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=parseInt(this.props.match.params.skip),a=parseInt(this.props.match.params.limit);if(isNaN(t)||isNaN(a))this.setState({error:!0});else{fetch("".concat("http://localhost:5000","/products?skip=").concat(t,"&limit=").concat(a)).then((function(t){if(t.ok)return t.json();e.setState({error:!0})})).then((function(t){e.setState({data:t})})).catch((function(t){e.setState({error:!0})}))}}},{key:"render",value:function(){if(this.state.error)return r.a.createElement(Q,{text:"Error while loading products. Possible reason: server is not running / skip and limit must be a number and limit > 0. Please check URL or contact with developer."});if(!this.state.data)return r.a.createElement(K,{text:"Loading products..."});var e=this.state.data,t=e.skip,a=e.limit,n=e.count,i=e.products,l={title:"Products(".concat(n,")"),options:{serverSide:!1,pagination:!0,filter:!1,filterType:"dropdown",rowsPerPage:50,rowsPerPageOptions:[10,20,50,100,400],rowHover:!0,responsive:"scroll",selectableRowsOnClick:!1,caseSensitive:!0,selectableRows:"none",disableToolbarSelect:!1,onRowClick:function(e,t){window.location="/product/"+e[0]}},rows:Array.isArray(i)&&i,columns:ve},o=n>200?r.a.createElement(Ee,{skip:t,limit:a,count:n}):null;return r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,xs:12,md:12},o),r.a.createElement(oe.a,{item:!0,xs:12,md:12},r.a.createElement(be.a,{title:l.title,columns:l.columns,options:l.options,data:l.rows})))}}]),t}(r.a.Component),we=function(){var e=r.a.createElement("span",{role:"img","aria-label":"emoji"},"\u2b50");return r.a.createElement("div",{className:"footer"},r.a.createElement(B.a,{fontWeight:"light",textAlign:"center",fontStyle:"italic",fontSize:"",m:1},e," Copyrights \xa9 Konrad Grzyb 2019 ",e))},ke=a(155),je=a(56),xe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke.a,null,r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(je.c,null,r.a.createElement(je.a,{exact:!0,path:"/",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(je.a,{path:"/products/skip/:skip/limit/:limit",component:ge}),r.a.createElement(je.a,{path:"/product/:id?",component:fe}),r.a.createElement(je.a,{path:"/profile",component:ae}),r.a.createElement(je.a,null,r.a.createElement(Q,{text:"Page not found."}))),r.a.createElement(we,null)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[258,1,2]]]);
//# sourceMappingURL=main.2f76647b.chunk.js.map